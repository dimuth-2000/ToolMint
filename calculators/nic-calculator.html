<!DOCTYPE html>
<html>
<head>
  <title>Sri Lankan NIC Calculator - ToolMint</title>
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    .result { margin-top: 15px; padding: 10px; background-color: #1a1a1a; border-radius: 5px; color: #fff; }
  </style>
</head>
<body>

<header>
  <h1 onclick="location.href='../index.html'" style="cursor:pointer;">ToolMint</h1>
  <nav><a href="../index.html">Home</a></nav>
</header>

<div class="container">
  <h2><i class="fas fa-id-card"></i> Sri Lankan NIC Calculator</h2>
  <p>Enter an old or new NIC to extract birth year, month, day and gender.</p>

  <input type="text" id="nic" placeholder="Enter NIC (Old: 85104275V, New: 198554201590)">
  <button onclick="calculateNIC()">Check NIC</button>

  <div class="result" id="nic-result"></div>

  <h3>Formula</h3>
  <p>
    <strong>Old NIC (9 digits + letter):</strong><br>
    YYYY = 1900 + first 2 digits (YY)<br>
    DDD = 3 digits after YY (add 500 for females)<br>
    Month & Day = Convert DDD to month/day<br>
    Gender = Male if DDD ≤ 366, Female if DDD > 500<br>
    <strong>New NIC (12 digits):</strong> Same logic with YYYY (4 digits), DDD, Serial, Check digit
  </p>

  <h3>Example</h3>
  <p>
    Old NIC: 85104275V → Year = 1985, DDD = 104 → 14 April, Male<br>
    New NIC: 198554201590 → Year = 1985, DDD = 542 → 1 October, Female
  </p>
</div>

<script>
function calculateNIC() {
  const nic = document.getElementById('nic').value.trim();
  if (!nic) { 
    document.getElementById('nic-result').innerText = "Please enter a NIC.";
    return;
  }

  let year, dayOfYear, gender, month, day;

  if (/^\d{9}[VX]$/i.test(nic)) { // Old NIC
    year = 1900 + parseInt(nic.substring(0,2));
    dayOfYear = parseInt(nic.substring(2,5));
    gender = dayOfYear > 500 ? "Female" : "Male";
    if (dayOfYear > 500) dayOfYear -= 500;
  } else if (/^\d{12}$/.test(nic)) { // New NIC
    year = parseInt(nic.substring(0,4));
    dayOfYear = parseInt(nic.substring(4,7));
    gender = dayOfYear > 500 ? "Female" : "Male";
    if (dayOfYear > 500) dayOfYear -= 500;
  } else {
    document.getElementById('nic-result').innerText = "Invalid NIC format!";
    return;
  }

  // Convert dayOfYear to month and day
  const monthDays = [31,28,31,30,31,30,31,31,30,31,30,31];
  if ((year % 4 === 0 && year % 100 !== 0) || year % 400 === 0) monthDays[1] = 29; // Leap year
  let m = 0;
  while(dayOfYear > monthDays[m]) {
    dayOfYear -= monthDays[m];
    m++;
  }
  month = m + 1;
  day = dayOfYear;

  document.getElementById('nic-result').innerHTML = `
    <strong>NIC:</strong> ${nic}<br>
    <strong>Year of Birth:</strong> ${year}<br>
    <strong>Month:</strong> ${month}<br>
    <strong>Day:</strong> ${day}<br>
    <strong>Gender:</strong> ${gender}
  `;
}
</script>

<footer>© 2025 ToolMint — All Rights Reserved</footer>

</body>
</html>
